---
layout:       post
title:        "IC 网络边界节点架构新变革：安全性、可扩展性与去中心化度的跃升"
published:    true
date:         2024-10-17
author:       "TQ2050"
header-style: text
catalog:      false
tags:
    - ICP
    - Node
    - 
---

> ICP 的新架构将区分 HTTP 网关和 API 边界节点。本文将探讨这些边界节点、系统改进和灾难恢复机制。

互联网计算机协议（ICP）正在准备推出边界节点架构的重大更新，旨在增强网络的安全性、稳定性和扩展性。新的架构将区分两种节点类型——HTTP网关和API边界节点，重点关注灾难恢复和事件处理。本文将探讨这些边界节点、系统的改进以及确保ICP网络韧性的灾难恢复机制。

### **1. 什么是边界节点？**

边界节点是ICP网络的重要组成部分，负责用户与底层区块链的交互。它们充当网关，将来自标准网络浏览器的用户请求转换为canister（智能合约）的API调用。这些节点确保请求能够高效地在网络中路由，并将负载分配到不同子网中的副本节点。此外，边界节点还提供缓存服务，以提高性能。

在Web2环境中，外部数据交互通常通过RESTful或GraphQL等API来处理，应用程序会向外部服务发送HTTP请求以获取数据，例如获取金融数据或天气预报。然而，在去中心化的区块链领域，应用程序不能直接与外部数据源通信。为了解决这个问题，区块链项目通常使用预言机作为中介，将链外数据引入区块链。

ICP的设计旨在尽量减少对外部系统的依赖。虽然它可以与Chainlink等预言机集成，但ICP的核心理念是通过边界节点和canister来处理数据，外部数据可以通过HTTPS请求直接进入ICP网络。这种方法类似于Web2的API调用，但完全去中心化，确保了更高的安全性和透明度。

### **2. ICP边界节点架构的核心改进**

ICP边界节点的路线图主要聚焦于两方面的改进：架构分离和功能增强。

#### **2.1 架构分离：HTTP网关与API边界节点**

之前，一个边界节点同时处理多个任务，例如管理用户请求和API调用。这样的集成设计在高流量或遭遇攻击时可能会过载。为了解决这个问题，ICP将架构分为两个专门的组件：HTTP网关和API边界节点。

HTTP网关作为终端，处理传输层安全协议（TLS），将用户请求转换为API canister调用。它类似于Web2中的反向代理服务器，负责将请求转换为与区块链兼容的格式，并确保数据安全传输。简而言之，HTTP网关为用户提供了访问网络的安全入口。

API边界节点则负责将API请求路由到ICP网络中的相应子网和副本节点。这些节点管理canister调用、应用速率限制，并提供缓存服务。在Web2中，这一角色类似于API网关，但在ICP中，它在去中心化架构内运行，确保了高效的请求处理，并避免了集中的控制。

区分HTTP网关和API边界节点的原因在于它们需要的信任等级不同。HTTP网关需要更多的信任，因为它们负责终止TLS连接并管理包含IC公钥的服务工作者。而API边界节点则不需要那么多的信任，它们将由NNS（网络神经系统）管理和奖励，类似于今天的副本节点管理方式。

这种架构为用户提供了多种访问IC网络的方式，具体取决于他们的偏好：

- **普通浏览器**：用户可以通过选择特定域名来选择HTTP网关（就像选择一个网站）。这种方式使用方便，但你仍然需要信任网关运营者。
- **IC原生客户端**：这些客户端是包含IC公钥的应用程序，允许用户直接连接到IC，而无需经过HTTP网关。

简而言之，大多数用户可能会为了方便选择使用HTTP网关，但原生客户端提供了一种更直接、更安全的选项，无需依赖特定的网关。然而，API边界节点仍然是系统的重要组成部分，帮助管理用户与IC副本节点之间的流量，并由NNS以去中心化的方式管理。

![img](https://lh7-rt.googleusercontent.com/docsz/AD_4nXd4qL2sBmKHC5K-YgY-0sDS-1lA-l7XVT55X9OCXVdiiEhbtrwUKg7IusLWjLdumAd-6PXMavxbh9zcUquwTcN1v6UvbJbs7vi1KrP8wo4BwdBJtfbxvXL-vtVoB5M48g1GL-UMIo2n94WKdXJbVfeUxhh8?key=cabu-C-6cbduA9CoXSynbg)

Source：https://forum.dfinity.org/

#### **2.2 功能增强：缓存、速率限制和安全性**

除了架构分离外，边界节点还将配备增强的缓存和速率限制功能。缓存有助于减少重复请求带来的负载，速率限制则可以防止流量激增导致的拒绝服务（DoS）攻击。

另一个关键改进是集成了先进的监控工具，这些工具可以使边界节点主动检测潜在的系统问题。自动恢复机制将确保任何中断能够迅速得到解决，最大限度地减少网络停机时间，确保服务的连续性。

### **3. 灾难恢复和事件处理**

随着NNS管理的API边界节点的引入，灾难恢复和事件处理成为了维护系统稳定性的关键方面。

#### **3.1 API边界节点的灾难恢复**

目前，边界节点由DFINITY运营，尚未经历过完全的故障。然而，随着边界节点管理权转移到NNS，必须考虑在边界节点故障时网络如何继续运行。

可以想象，如果所有边界节点都停止工作，可能会导致网络停滞。为了防止这种情况，系统需要一个备份计划。这类似于当计算机崩溃时拥有一个备用硬盘，以便在不依赖故障系统的情况下继续工作。

**解决方案**：DFINITY提出了在防火墙内将特定IP地址列入白名单的建议。这些IP地址将作为备用访问点，绕过故障的边界节点，直接连接到NNS。这确保了即使在边界节点故障的情况下，用户仍然可以提交提案和投票。

#### **3.2 事件处理中的速率限制**

可以想象，当一个购物网站在黑色星期五大促期间流量激增时，为防止服务器过载，网站会限制每秒处理的请求数量。同样，ICP网络也需要一个速率限制机制，以应对突发的请求激增，例如在服务中断或攻击期间。

过去，DFINITY通过临时速率限制和过滤规则来保护系统，防止高负载或漏洞带来的威胁，如内存泄漏或系统资源耗尽时。随着边界节点管理权过渡到NNS，一个更加去中心化的机制将成为必要。

**解决方案**：DFINITY建议创建一个“速率限制容器”，一个监控并限制API边界节点能够处理请求数量的工具。授权管理员可以临时调整这些限制，以保护系统免受过多流量的影响。在事件结束后，所有调整将公开审计，确保透明度和安全性。

### **4. 边界节点架构的设计目标**

升级后的边界节点架构围绕几个设计目标构建：

#### **4.1 无单一信任点**

其中一个关键目标是确保用户在与ICP交互时不需要信任单一实体。通过消除单点故障，ICP增强了其去中心化特性。该架构允许多个节点运营者参与，减少对集中系统的依赖，并提高了整体可用性。

HTTP网关将是自我管理的，任何人都可以根据个人策略在自己的域名下运行一个网关。用户可以选择自己最信任的HTTP网关，从而实现“无单一信任点”的目标。

API边界节点将通过NNS管理和奖励，类似于当前的副本节点，且大部分由第三方提供。

#### **4.2 可用性**

新设计允许用户通过Chrome或Firefox等标准网络浏览器访问ICP服务，无需额外的插件或配置。这种用户友好的方式降低了进入门槛，使用户更容易参与ICP上的Web3应用程序。

#### **4.3 抗审查和法律合规**

每个节点运营者可以根据当地法律进行合规，而不影响其他节点的操作。例如，一个节点可能会基于当地法规限制特定服务，而其他节点则可以继续全球运营，确保ICP在不受地区法律约束的情况下保持对全球用户的可访问性。

#### **4.4 开放性**

新的边界节点架构通过允许任何人操作边界节点，最大化了社区的管理角色。社区成员将在运行HTTP网关和API边界节点方面发挥重要作用。

### **结论**

互联网计算机的边界节点架构更新标志着网络在去中心化、安全性和可用性方面的显著进步。通过将架构分为HTTP网关和API边界节点，ICP提高了网络的效率和可靠性。此外，改进的灾难恢复机制和速率限制功能确保了ICP在面对挑战时的韧性。这些更新使ICP成为一个强大且可扩展的平台，以应对Web3应用程序日益增长的需求。

### **引用**

- https://forum.dfinity.org/t/incident-handling-with-the-new-boundary-node-architecture/36390
- https://forum.dfinity.org/t/boundary-node-roadmap/15562


**关注我们**

**每周ICP资讯订阅：**[**@WeekinICP**](https://x.com/Week_ICP)

**研究员X号：**[**@TQ2050**](https://x.com/TQ2050)


**声明：**

本文提供的研究、分析和内容仅代表个人想法和观点，仅供参考，不应被视为财务或投资建议。我们鼓励读者在做出任何投资决定之前，自行进行研究并咨询财务顾问。
