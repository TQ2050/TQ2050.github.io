---
layout:       post
title:        "可扩展性： ICP网络的可扩展性和成本效益权衡策略"
published:    true
date:         2024-10-26
author:       "TQ2050"
header-style: text
catalog:      false
tags:
    - ICP
    - Chain Fusion
    - Decentralized
---

> ICP 的新架构将分为 HTTP 网关和 API 边界节点。本文将探讨这些边界节点、系统改进和灾难恢复机制。

**本文重点:**

- Web3 愿景下的去中心化的网络，承诺透明、安全和增强用户自主性。然而，大规模采用 Web3 所面临的主要挑战包括：可扩展性、用户体验、安全性、互操作性、监管与合规性、采用障碍。本文主要关注可扩展性问题。
- 提高区块链可扩展性的主流解决方案包括 Layer1 解决方案、Layer2 解决方案、互操作性和数据存储优化。比特币和以太坊实施了各种解决方案，包括比特币的 SegWit 和闪电网络，以及以太坊的 Layer2 解决方案（如rollups），以解决吞吐量和延迟问题。
- 实现Web3环境需要整合各种技术和工具，以构建去中心化应用（dApps）和服务。本文我们选择互联网计算机协议（以下简称 “ICP”）作为研究对象，结合该项目的主要特点：优化的共识机制、高性能节点配置和链融合技术，讨论其在提高可扩展性方面的贡献。

**背景**

自 2009 年比特币的问世点燃了加密货币创新的导火索以来，该领域的开发人员一直在忙于缩短启蒙阶段的坡度，加快生产力高原的到来。

以太坊联合创始人 Gavin Wood 于 2014 年首次使用 “Web3 ”一词。它指的是一种通过将去中心化、区块链技术、智能合约和加密货币结合起来，强调安全、隐私和用户自治的网络环境。由于投资者、大型科技企业和爱好者对加密货币的兴趣上升，这一概念成为 2021 年牛市热潮的主要故事之一。但随着市场的萎缩，我们看到，在实现 Web 3 被广泛接受的道路上存在障碍。尽管 Web 3 并未被完全否定，但围绕它的障碍和质疑也不少。虽然去中心化网络的想法很吸引人，但在得到广泛接受并证明其长期可持续性之前，必须解决一系列问题。

**主要挑战**

- 可扩展性： 区块链技术的主流应用受到当前网络无法扩展的阻碍，这导致了昂贵的价格和迟缓的交易速率。
- 用户体验： 与传统的 Web2 服务相比，Web3 应用程序的用户体验往往更复杂、更不直观，这使得普通用户的互动面临挑战。
- 安全问题： 尽管承诺提高安全性，Web3 应用程序一直是诈骗和网络攻击的目标，这引发了人们对去中心化平台安全性的质疑。
- 互操作性： 不同区块链网络之间缺乏互操作性，这造成了碎片化，限制了跨平台无缝使用 Web3 服务。
- 监管与合规： Web3 的去中心化性质给监管监督和合规性带来了挑战，可能导致法律不确定性和潜在的打击。
- 采用障碍： 从集中式系统过渡到分散式系统需要在基础设施、思维方式和激励机制方面进行重大转变，而这些方面的转变可能会比较缓慢且阻力较大。

**提高可扩展性的主流解决方案**

由于可扩展性问题，比特币和以太坊等区块链网络无法有效处理大量交易，从而导致网络拥塞、交易速度缓慢和费用昂贵。以下是提高区块链可扩展性的一些常见方法：

- Layer 1 解决方案： 共识机制优化和分片。
- Layer 2 解决方案： 状态通道、侧链和滚动。
- 互操作性： 跨链通信协议。
- 数据存储优化： 链外数据存储和零知识证明（ZK-Proofs）。

SegWit 的引入对比特币来说是一个积极的发展。通过将交易签名与交易数据隔离，SegWit 扩大了有效区块的大小。这种修改允许每个区块容纳更多的交易，从而缓解了部分拥堵问题。

同时，闪电网络技术也使比特币链外交易成为可能，该技术解决了可扩展性问题，降低了交易延迟。通过创建支付渠道，用户可以大大减少主网络上的劳动量，交易成本低廉且瞬时完成，区块链上只记录最终状态。

随着权益证明（PoS）和 Layer 2 解决方案（如 zk-Rollups 和 Optimistic Rollups）的采用，以太坊的吞吐量和延迟将得到改善。通过在layer 1 链外处理交易并定期向主链发送交易摘要，这些 Layer 2 解决方案可以提高吞吐量、减少延迟并最大限度地利用稀缺的区块空间。此外，以太坊 2.0 的分片机制将把网络分割成更小的片段或分片。每个分片都能处理自己的智能合约和交易。这样一来，网络容量将大幅提升，所需的链外数据存储也将减少。

除了比特币和以太坊之外，各种区块链项目还在研究各种提高可扩展性的新技术。本文以互联网计算机协议为例，探讨了增强可扩展性的方法。

下表列出了主要区块链网络与传统支付系统的性能和成本对比统计数据。

[![img](https://fyyrz-syaaa-aaaaf-qailq-cai.raw.icp0.io/storage?contentId=fpqpt-6xdln-xhwvd-burb7-jeh64-5azwh-3llv2-noam3-5fm4m-jeseh-2qe-image-20661)](https://fyyrz-syaaa-aaaaf-qailq-cai.raw.icp0.io/storage?contentId=fpqpt-6xdln-xhwvd-burb7-jeh64-5azwh-3llv2-noam3-5fm4m-jeseh-2qe-image-20661)

**ICP网络的可扩展性和成本效益权衡策略**

ICP 网络旨在构建一个去中心化、可扩展的全球互联网基础设施，在这个基础设施中，被称为 “罐子 ”的智能合约能以与标准在线应用程序相同的速度、安全性和规模运行。

ICP 网络构思了一个完全去中心化的互联网，在这个互联网中，服务、平台和数据不再由中心化实体控制，而是由独立的数据中心网络管理和运行。

可扩展性对 ICP 网络至关重要，对其他区块链网络也是如此，因为去中心化的互联网必须能够管理大量数据和交易，才能与中心化系统相比具有竞争力和可持续性。一个具有高度可扩展性的网络可以在不影响去中心化或安全性的情况下广泛采用、扩展并以网络速度运行。

ICP 网络使用了高性能节点配置、共识机制优化和链融合技术，以提高其可扩展性，实现一个可服务于海量应用的去中心化互联网的目标。

[![img](https://fyyrz-syaaa-aaaaf-qailq-cai.raw.icp0.io/storage?contentId=fpqpt-6xdln-xhwvd-burb7-jeh64-5azwh-3llv2-noam3-5fm4m-jeseh-2qe-image-20662)](https://fyyrz-syaaa-aaaaf-qailq-cai.raw.icp0.io/storage?contentId=fpqpt-6xdln-xhwvd-burb7-jeh64-5azwh-3llv2-noam3-5fm4m-jeseh-2qe-image-20662)

**共识机制优化**

对于比特币和以太坊来说，在数以万计的节点上达成共识是最耗时的过程，也是对 TPS 影响最大的过程。尤其是以下几方面：

- 广播交易和区块： 用户发起的交易需要广播到每个网络节点。每个节点接收、验证和转播交易都需要时间，特别是在大型分散式网络中。同样，新挖出的区块也需要在网络中传播。该区块必须被下载、检查并添加到每个节点的区块链本地副本中。
- Verification 和 Validation： 每个节点都会独立确认区块和交易是否符合网络准则。这包括验证签名和检查重复消费。
- 共识机制： 随后添加到区块链中的区块达成共识。

在 PoW 系统（如比特币）中，矿工们争相破解密码谜题，这需要大量的计算和时间。第一个解开谜题的矿工向网络广播新区块。

在以太坊 2.0 等 PoS 系统中，验证者对下一个区块进行提议和投票。这涉及多轮通信和投票，非常耗时。

因此，根据上述共识机制，随着网络的发展，节点需要更频繁地通信以获得共识，这就增加了开销，降低了 TPS。

接下来，我们将介绍 ICP 网络对共识机制进行的优化，具体如下。

- BLS 签名聚合： 将多个签名合并为一个签名，减少验证工作量。
- 简化共识流程： 简化节点通信，加快达成共识的速度。
- 阈值中继机制： 通过节点批准的阈值数量快速达成共识。
- 随机信标： 随机选择下一个区块的提议者，实现快速、无偏见的生成。

通过使用简化的共识程序和 BLS 签名汇总，ICP网络成功地减轻了这一负担。**使用 BLS 签名可将多个签名合并为一个签名。节点可在交易验证过程中将多个签名合并为一个签名，只需进行一次验证。**因此，签名验证所需的带宽和处理能力大大降低。

如果涉及 1000 个交易，每个交易都需要验证签名，每个签名的验证时间为 10 毫秒，那么总的验证时间就是 10 秒。如果使用 BLS 签名聚合将 1,000 个签名合并为一个签名，只需 10 毫秒，效率将大大提高。

此外，通过阈值中继机制，只有达到阈值数量的节点（例如节点总数的三分之二）签署一个区块才被认为有效。这种机制减少了节点之间的通信次数，从而降低了网络延迟。

现在，让我们假设一个有 100 个节点的网络，以前的共识机制可能需要每个节点与其他 100 个节点通信，而阈值中继只需要与大约 67 个节点通信，从而减少了通信轮次。

ICP网络使用快速区块生成技术大大提高了 TPS。随机信标与阈值中继相结合，可实现快速区块生成。

下一个区块的提议者由随机信标选择，随机信标使用 BLS 签名生成一个不可预测且难以管理的随机数。**通过防止节点提前知道自己是否会被选中，这种随机选择减少了攻击的可能性，并保证了公平性。**如果每轮区块生成耗时一秒，随机信标可在几毫秒内选择提议者，从而大大缩短等待时间。

一旦收集到所需数量的签名，节点就能迅速达成共识，并利用阈值中继机制生成区块。如果阈值设置为 67%，则可以立即生成区块，而无需等待每个节点达成共识。如果所有节点达成共识需要 10 秒钟，那么阈值中继机制可以在几秒钟内完成共识，从而提高区块生成速度。

**Chain Key 技术**

ICP 网络使用分片技术实现可扩展性，将网络划分为多个子网，每个子网作为一个独立的区块链运行。这些子网处理各自的交易，并承载罐子（智能合约）。随着需求的增长，可以动态创建新的子网，分配工作量，使网络能够横向扩展，没有预定义的限制。每个子网并行运行，使网络能够有效扩展和管理日益增长的需求。想象一下在 ICP 网络上建立的拥有数百万用户的社交媒体平台。随着更多用户的加入，会创建更多的子网来处理增加的数据和处理需求。无论用户数量多少，平台都能继续平稳运行。

Chain Key技术是一种加密创新技术，可使 ICP网络中的子网之间进行安全、高效的通信。每个子网都有一个链式密钥，这是一个代表整个子网的单一公开密钥。该密钥使子网之间能够相互验证和交互，而无需整个交易历史记录，从而减少了通信开销。它实现了无缝跨子网交易和数据交换。例如，当用户与一个子网罐交互时，需要另一个子网的数据，链式密钥技术可以让这种交互即时、安全地进行，而无需等待多次确认。

Canisters 不受限于单一子网，可以根据需要在子网之间移动。当一个子网过于拥挤时，可以将 Canisters 转移到不太繁忙的子网，而不会中断它们的运行。这可以确保网络保持平衡，防止任何一个子网成为瓶颈，并使网络能够平衡各子网的负载，优化资源利用率。

**节点配置**

除网络分片外，高性能节点设备还能大大提高网络 TPS。ICP 网络节点专为高性能网络和计算应用设计，具有服务器级别性能。拥有大内存（16 x 32GB RDIMM）、双端口 10G 网络连接、高速 NVMe 存储和双插槽 AMD EPYC Milan CPU。这些规格提供了满足高交易处理和数据存储需求所需的基础设施，超越了消费级硬件的能力。

**节点机规格比较:**

[![img](https://fyyrz-syaaa-aaaaf-qailq-cai.raw.icp0.io/storage?contentId=fpqpt-6xdln-xhwvd-burb7-jeh64-5azwh-3llv2-noam3-5fm4m-jeseh-2qe-image-20663)](https://fyyrz-syaaa-aaaaf-qailq-cai.raw.icp0.io/storage?contentId=fpqpt-6xdln-xhwvd-burb7-jeh64-5azwh-3llv2-noam3-5fm4m-jeseh-2qe-image-20663)

此外，网络的高带宽和低延迟能力也至关重要。ICP 网络节点通常位于拥有高速网络连接的数据中心，可确保快速的数据传输和接收。低延迟对共识过程尤为重要，因为可以减少节点就区块链状态进行通信和达成共识所需的时间，从而保持网络的完整性和速度。

**Chain Fusion 技术**

ICP Chain Fusion 技术的目的是促进多个区块链之间数据、交易和智能合约功能的顺畅通信和交换。通过将多个区块链网络整合到一个系统中，该机制试图重新定义Web 3，这对于解决其他区块链面临的可扩展性问题至关重要。

我们将 ICP Chain Fusion 技术对可扩展性的贡献归纳如下：

- **横向扩展，不降低性能**
  - Chain Fusion 技术对子网区块链的动态整合可确保横向扩展，从而使网络能够处理更大的交易量，支持更复杂的应用，而不会出现性能下降。
- **去中心化结构并保留安全性**
  - 与依赖中心化服务器或外部数据库的传统系统不同，Chain Fusion 技术采用去中心化结构。每个集成的区块链都保留了自己的共识机制和安全协议，从而保持了去中心化，避免了中心故障点。
- **优化资源利用率**
  - 该网络通过将计算密集型任务分配给处理能力强的区块链，同时让数据存储效率高的区块链处理存储量大的任务，从而优化资源利用率。这确保了网络以最高效率运行，避免了传统系统中常见的瓶颈和低效问题。
- **跨链协同**
  - 通过整合 BTC、ETH 和 ICP 等网络，可以提高交易吞吐量，改善安全性，建立统一的智能合约和 dApp 生态系统。特别是通过 ICP 的罐式智能合约，这些网络的协同作用支持开发更强大、可扩展的去中心化应用程序（dApps）。

**高性能区块链的中心化风险**

我们已经介绍了 ICP 网络在扩展性方面的优势，那么是否也存在潜在风险呢？答案是肯定的。

理论上，区块链网络的去中心化程度会受到服务器级节点硬件部署的影响。由于高昂的成本和复杂的操作要求，它提高了个人参与的门槛。一个基于地理位置的 ICP 网络第二代节点的购置和维护总成本在 31,000 到 57,500 XDR 之间。XDR 是国际货币基金组织定义和管理的额外外汇储备资产。

因此，如何在分散程度、网络规模和成本之间取得平衡是 ICP网络非常关注的问题。

下面我们再来讨论 ICP网络目前为应对这一风险而采取的对策。

**节点分布中的确定性去中心化**

在区块链网络中，增加节点数量可以增强去中心化，但也会提高节点提供者的成本。完全去中心化具有挑战性，即使是比特币和以太坊也面临着来自矿池和质押鲸鱼们的中心化风险。**一个切实可行的解决方案是 “多中心去中心化”，即在多个独立实体之间分配控制权。**

什么是确定性权力下放？简单地说，它是指控制权或权力的分配过程，是按照一套预定义的规则或算法进行，从而使结果既可靠又透明。ICP 网络通过设定目标拓扑结构来使用这一机制，以实现各节点之间的最佳分散（考虑到管辖权、地理位置和所有权等因素）。**目标拓扑侧重于四个不同的指标：节点提供商、数据中心、数据中心提供商和国家。**

目前，ICP 网络在 37 个子网中拥有 1,493 个节点，559 台活动机器。集成电路上的节点在数据中心、数据中心提供商和节点提供商方面呈现出显著的多样化。子网中的每个节点都由不同的节点提供商、数据中心和数据中心提供商运营，地理限制确保同一国家的节点不超过两三个。

 ICP 在国家地理位置的分散节点分布方面已经工作了一段时间，主要是在美国和瑞士。

**网络神经系统 (NNS) 系统助推去中心化**

ICP 的 NNS 系统是一个创造性的自治管理框架，它使去中心化治理变得更加容易。通过授权 ICP 代币持有者参与治理，NNS 可确保决策的去中心化和社区驱动。代币持有者可以对网络升级和变更提案进行投票，从而有效地引导网络的发展。

此外，NNS 还能动态管理节点和子网，将它们分配给不同的独立运营商，以避免集中化。这种设置可实现协议的无缝升级，无需硬分叉，从而保持网络的持续运行和改进。通过分散控制和促进社区参与，NNS 促进了高度分散化，同时确保网络保持高效和安全。

**结论**

ICP 网络在提高可扩展性方面确实大有可为，但尚未进行行业应用的市场测试。我们将继续关注并深入研究。我们也诚邀 ICP 研究人员贡献真知灼见，共同参与头脑风暴。

Web3 要取得成功，可扩展性至关重要，因为它决定了分散式网络能否在效果、速度和用户体验方面与集中式系统相媲美。要在不牺牲互操作性、安全性或去中心化的前提下实现可扩展性仍然非常困难。要克服这些挑战，实现 Web3 的承诺，需要在共识算法、节点性能和跨链连接方面进行更多创新。

随着行业的发展，Web3 的未来将取决于一种既能提高可扩展性，又能坚持安全性和去中心化基本理念的平衡战略。

**关注我们**

**每周ICP资讯订阅：**[**@WeekinICP**](https://x.com/Week_ICP)

**研究员X号：**[**@TQ2050**](https://x.com/TQ2050)


**声明：**

本文提供的研究、分析和内容仅代表个人想法和观点，仅供参考，不应被视为财务或投资建议。我们鼓励读者在做出任何投资决定之前，自行进行研究并咨询财务顾问。
